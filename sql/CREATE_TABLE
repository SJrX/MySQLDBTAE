-- phpMyAdmin SQL Dump
-- version 3.3.2deb1ubuntu1
-- http://www.phpmyadmin.net
--
-- Host: arrowdb.cs.ubc.ca:4040
-- Generation Time: Dec 03, 2012 at 08:00 PM
-- Server version: 5.1.46
-- PHP Version: 5.3.2-1ubuntu4.17

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";

--
-- Database: `mysql_db_tae`
--

-- --------------------------------------------------------

--
-- Table structure for table `algorithmRuns`
--

CREATE TABLE IF NOT EXISTS `algorithmRuns` (
  `runConfigUUID` char(48) COLLATE utf8_unicode_ci NOT NULL,
  `algorithmRunID` int(11) NOT NULL AUTO_INCREMENT,
  `runResult` enum('TIMEOUT','SAT','UNSAT','CRASHED','ABORT') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'ABORT',
  `runLength` double NOT NULL DEFAULT '0',
  `quality` double NOT NULL DEFAULT '0',
  `result_seed` int(11) NOT NULL DEFAULT '-1',
  `result_line` varchar(2048) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'ABORT,0,0,0,0',
  `runtime` double NOT NULL DEFAULT '0',
  `additional_run_data` varchar(2048) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`algorithmRunID`),
  UNIQUE KEY `runConfigUUID_2` (`runConfigUUID`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=386923 ;

-- --------------------------------------------------------

--
-- Table structure for table `commandTable`
--

CREATE TABLE IF NOT EXISTS `commandTable` (
  `commandID` int(11) NOT NULL AUTO_INCREMENT,
  `commandString` text COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`commandID`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=66 ;

-- --------------------------------------------------------

--
-- Table structure for table `execConfig`
--

CREATE TABLE IF NOT EXISTS `execConfig` (
  `algorithmExecutionConfigID` int(11) NOT NULL AUTO_INCREMENT,
  `algorithmExecutionConfigHashCode` char(40) COLLATE utf8_unicode_ci NOT NULL,
  `algorithmExecutable` varchar(256) COLLATE utf8_unicode_ci NOT NULL,
  `algorithmExecutableDirectory` varchar(256) COLLATE utf8_unicode_ci NOT NULL,
  `parameterFile` varchar(256) COLLATE utf8_unicode_ci NOT NULL,
  `executeOnCluster` tinyint(1) NOT NULL,
  `deterministicAlgorithm` tinyint(1) NOT NULL,
  `cutoffTime` double NOT NULL,
  `lastModified` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`algorithmExecutionConfigID`),
  UNIQUE KEY `algorithmExecutionConfigHashCode` (`algorithmExecutionConfigHashCode`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=40 ;

-- --------------------------------------------------------

--
-- Table structure for table `runConfigs`
--

CREATE TABLE IF NOT EXISTS `runConfigs` (
  `runConfigUUID` char(48) COLLATE utf8_unicode_ci NOT NULL,
  `execConfigID` int(11) NOT NULL,
  `problemInstance` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `seed` bigint(20) NOT NULL,
  `cutoffTime` double NOT NULL,
  `paramConfiguration` varchar(2048) COLLATE utf8_unicode_ci NOT NULL,
  `paramConfigurationHash` char(40) COLLATE utf8_unicode_ci NOT NULL,
  `cutoffLessThanMax` tinyint(1) NOT NULL,
  `status` enum('NEW','ASSIGNED','COMPLETE') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'NEW',
  `priority` int(11) NOT NULL DEFAULT '0',
  `workerUUID` char(48) COLLATE utf8_unicode_ci DEFAULT NULL,
  `lastModified` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`runConfigUUID`),
  KEY `execConfigID` (`execConfigID`),
  KEY `status` (`status`,`workerUUID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Constraints for dumped tables
--

--
-- Constraints for table `algorithmRuns`
--
ALTER TABLE `algorithmRuns`
  ADD CONSTRAINT `algorithmRuns_ibfk_1` FOREIGN KEY (`runConfigUUID`) REFERENCES `runConfigs` (`runConfigUUID`) ON DELETE CASCADE;

--
-- Constraints for table `runConfigs`
--
ALTER TABLE `runConfigs`
  ADD CONSTRAINT `runConfigs_ibfk_1` FOREIGN KEY (`execConfigID`) REFERENCES `execConfig` (`algorithmExecutionConfigID`) ON DELETE CASCADE;
